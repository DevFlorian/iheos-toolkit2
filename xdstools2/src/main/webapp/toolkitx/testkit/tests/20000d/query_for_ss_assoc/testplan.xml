<?xml version="1.0" encoding="UTF-8"?><TestPlan>
	<Test>20000d/query_for_ss_assoc</Test>
	<Rule>GetFoldersForDocumentsAndAssociations Stored Query</Rule>
	<TestStep id="query">
		<Rule>
			<Transaction>SQ</Transaction>
			<SQ>GetAssociations</SQ>
		</Rule>
		<ExpectedStatus>Success</ExpectedStatus>
		<StoredQueryTransaction>
			<XDSb/>
			<MetadataFile>query.xml</MetadataFile>
			<UseId testdir="../update" step="update" section="AssignedUuids" id="SubmissionSet01" symbol="$uuid$"/>
			<!--[Testing for Approved - Level 1 regardless? May not know about deprecated? FolApp?]-->
			<ExpectedContents>
				<Associations count="3"/>
			</ExpectedContents>
			<Report name="targetObject01" section="Result">
				//*[local-name()='Association'][not(descendant::*[local-name()='Slot'][@name='PreviousVersion']/*[local-name()='ValueList']/*[local-name()='Value'] = '1')][1]/@targetObject
			</Report>
			<Report name="targetObject02" section="Result">
				//*[local-name()='Association'][not(descendant::*[local-name()='Slot'][@name='PreviousVersion']/*[local-name()='ValueList']/*[local-name()='Value'] = '1')][2]/@targetObject
			</Report>		
		</StoredQueryTransaction>
	</TestStep>
	<TestStep id="validate">
		<!--add check confirming both a Folder-->
		<NullTransaction>
			<UseReport section="update" step="update" reportName="SubmissionSet01_uuid" useAs="ss_uuid"/>
			<Assertions>
				<DataRef file="THIS" as="output"/>
				<Assert id="same_sourceObject">
					count(//*[local-name()='Association'][@sourceObject = "ss_uuid"]) = 3
				</Assert>
				<Assert id="approved_status">
					count(//*[local-name()='Association'][@status = 'urn:oasis:names:tc:ebxml-regrep:StatusType:Approved']) = 3
				</Assert>
				<Assert id="prev_is_version_1"> 		    //*[local-name()='Association']/*[local-name()='Slot'][@name='PreviousVersion']/*[local-name()='ValueList']/*[local-name()='Value'] = '1'
				</Assert>
				<Assert id="other_no_previousversion"> 			   
					count(//*[local-name()='Association'][not(descendant::*[local-name()='Slot'][@name='PreviousVersion']/*[local-name()='ValueList']/*[local-name()='Value'] = '1')]) = 2
				</Assert>
			</Assertions> 
		</NullTransaction>
	</TestStep>
</TestPlan>